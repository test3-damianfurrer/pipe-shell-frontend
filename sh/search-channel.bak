#!/bin/sh
search_channel(){
mkdir -p find
cd find
#wget -q -O "result.json" "https://damianfurrer.ch/yt/search?q=${1}&filter=channels"
result=$(curl "https://damianfurrer.ch/yt/search?q=${1}&filter=channels" 2> /dev/null)
jq -r '.items[].name' <<< "${result}"  > name.txt
jq -r '.items[].thumbnail' <<< "${result}"  > thumb.txt
jq -r '.items[].url'  <<< "${result}"  > url.txt
mkdir -p res
cd res
declare -i i
i=1
while read line
do
#echo ">$line"
name=$(awk "NR == $i"' {print}' ../name.txt)
id=$(awk "NR == $i"' {print}' ../url.txt | sed 's/\/channel\///')
wget -q -O "${name}.webp" "${line}"
echo "${id}" > "${name}.txt"
i+=1
#exit
done < ../thumb.txt

selecttxt=$(cat ../name.txt | sed 's/$/.webp/' | /home/damian/source-code/sxiv/sxiv-test -iol | sed 's/.webp$/.txt/')
#cat "${selecttxt}"
while read line
do
	#echo ">$line"
	cat "${line}"
done <<< "${selecttxt}"
rm *
cd ..
cd ..
}
